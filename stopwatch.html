<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stopwatch</title>
<style>
:root {
  --bg:#f5f7fa; --text:#1a1a1a; --card-bg:rgba(255,255,255,.55);
  --accent:#4a8bff; --accent-hover:#2f6ef0; --shadow:rgba(0,0,0,.15); --blur:18px;
}
:root.dark {
  --bg:#0f1115; --text:#f1f1f1; --card-bg:rgba(30,32,38,.55);
  --accent:#6aa0ff; --accent-hover:#8bb4ff; --shadow:rgba(0,0,0,.6);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:"Segoe UI",sans-serif;}
body{
  background:var(--bg);color:var(--text);min-height:100vh;
  display:flex;justify-content:center;align-items:center;padding:20px;
}
.box{
  width:100%;max-width:500px;background:var(--card-bg);backdrop-filter:blur(var(--blur));
  border-radius:20px;box-shadow:0 8px 30px var(--shadow);padding:24px;text-align:center;
}
h1{font-size:1.7rem;margin-bottom:10px;}
.time{
  font-size:2.8rem;font-weight:700;margin:10px 0 16px;
}
.buttons button{
  padding:10px 16px;border-radius:10px;border:none;background:var(--accent);color:#fff;
  cursor:pointer;transition:.2s;font-size:.9rem;margin:0 4px;
}
.buttons button:hover{background:var(--accent-hover);transform:translateY(-1px);}
.buttons button.secondary{
  background:transparent;color:var(--text);border:1px solid rgba(0,0,0,0.1);
}
.buttons button.secondary:hover{
  background:rgba(255,255,255,0.4);
}
.laps{
  margin-top:16px;text-align:left;max-height:200px;overflow:auto;font-size:.9rem;
}
.laps h3{margin-bottom:6px;font-size:.95rem;}
.laps ul{list-style:none;padding-left:0;}
.laps li{padding:4px 0;border-bottom:1px solid rgba(0,0,0,0.05);}
.theme-toggle{
  position:fixed;top:20px;right:20px;background:var(--card-bg);backdrop-filter:blur(var(--blur));
  border:none;padding:10px 14px;border-radius:12px;cursor:pointer;font-size:.9rem;
  color:var(--text);box-shadow:0 4px 20px var(--shadow);z-index:1000;
}
</style>
</head>
<body>

<button class="theme-toggle" id="themeToggle">üåó Thema</button>

<div class="box">
  <h1>‚è± Stopwatch</h1>
  <div class="time" id="time">00:00.00</div>
  <div class="buttons">
    <button id="startStop">Start</button>
    <button id="lap" class="secondary">Ronde</button>
    <button id="reset" class="secondary">Reset</button>
  </div>
  <div class="laps" id="laps">
    <h3>Rondes</h3>
    <ul id="lapList"></ul>
  </div>
</div>

<script>
const root = document.documentElement;
const toggleBtn = document.getElementById("themeToggle");
if (localStorage.getItem("theme") === "dark") root.classList.add("dark");
toggleBtn.addEventListener("click", () => {
  root.classList.toggle("dark");
  localStorage.setItem("theme", root.classList.contains("dark") ? "dark" : "light");
});

let startTime = null;
let elapsed = 0;
let timerId = null;
let running = false;
let lapCount = 0;

const timeEl = document.getElementById("time");
const startStopBtn = document.getElementById("startStop");
const lapBtn = document.getElementById("lap");
const resetBtn = document.getElementById("reset");
const lapList = document.getElementById("lapList");

function formatTime(ms){
  const totalSeconds = ms / 1000;
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = Math.floor(totalSeconds % 60);
  const centis = Math.floor((totalSeconds - Math.floor(totalSeconds)) * 100);
  return `${String(minutes).padStart(2,"0")}:${String(seconds).padStart(2,"0")}.${String(centis).padStart(2,"0")}`;
}

function update(){
  const now = performance.now();
  const diff = now - startTime + elapsed;
  timeEl.textContent = formatTime(diff);
  timerId = requestAnimationFrame(update);
}

startStopBtn.addEventListener("click", () => {
  if (!running) {
    running = true;
    startTime = performance.now();
    timerId = requestAnimationFrame(update);
    startStopBtn.textContent = "Stop";
  } else {
    running = false;
    cancelAnimationFrame(timerId);
    const now = performance.now();
    elapsed += now - startTime;
    timeEl.textContent = formatTime(elapsed);
    startStopBtn.textContent = "Start";
  }
});

lapBtn.addEventListener("click", () => {
  if (!running) return;
  lapCount++;
  const li = document.createElement("li");
  li.textContent = `Ronde ${lapCount}: ${timeEl.textContent}`;
  lapList.prepend(li);
});

resetBtn.addEventListener("click", () => {
  running = false;
  cancelAnimationFrame(timerId);
  startTime = null;
  elapsed = 0;
  lapCount = 0;
  timeEl.textContent = "00:00.00";
  startStopBtn.textContent = "Start";
  lapList.innerHTML = "";
});
</script>

</body>
</html>
