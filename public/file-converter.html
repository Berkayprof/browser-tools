<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>File Converter</title>

<style>
:root { --bg:#f5f7fa; --text:#1a1a1a; --card-bg:rgba(255,255,255,.55);
--accent:#4a8bff; --accent-hover:#2f6ef0; --shadow:rgba(0,0,0,.15); --blur:18px; }
:root.dark { --bg:#0f1115; --text:#f1f1f1; --card-bg:rgba(30,32,38,.55);
--accent:#6aa0ff; --accent-hover:#8bb4ff; --shadow:rgba(0,0,0,.6); }

body {
  background:var(--bg); color:var(--text); font-family:"Segoe UI",sans-serif;
  min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px;
}
.box {
  max-width:600px; width:100%; background:var(--card-bg); backdrop-filter:blur(var(--blur));
  padding:30px; border-radius:20px; box-shadow:0 8px 30px var(--shadow); text-align:center;
}
button {
  padding:12px 20px; border-radius:10px; border:none; background:var(--accent); color:#fff;
  cursor:pointer; transition:.2s; margin-top:10px;
}
button:hover { background:var(--accent-hover); transform:translateY(-2px); }
canvas { max-width:100%; margin-top:15px; border-radius:10px; }
</style>
</head>

<body>

<div class="box">
  <h1>ðŸ“‚ File Converter</h1>

  <input type="file" id="file" accept="image/*,application/pdf"><br><br>

  <button onclick="convert('png')">Naar PNG</button>
  <button onclick="convert('jpg')">Naar JPG</button>
  <button onclick="convert('webp')">Naar WEBP</button>
  <button onclick="convertPDF()">PDF â†’ PNG</button>

  <canvas id="canvas"></canvas>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script>
let img = new Image();
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");

document.getElementById("file").onchange = e => {
  const file = e.target.files[0];
  if (!file) return;

  if (file.type === "application/pdf") {
    alert("Gebruik de PDF-knop om PDF te converteren");
    return;
  }

  img.src = URL.createObjectURL(file);
  img.onload = () => {
    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img, 0, 0);
  };
};

function convert(type) {
  if (!canvas.width) return;

  const data = canvas.toDataURL("image/" + type);
  const a = document.createElement("a");
  a.href = data;
  a.download = "converted." + type;
  a.click();
}

async function convertPDF() {
  const file = document.getElementById("file").files[0];
  if (!file || file.type !== "application/pdf") return alert("Upload een PDF");

  const pdf = await pdfjsLib.getDocument(URL.createObjectURL(file)).promise;
  const page = await pdf.getPage(1);

  const viewport = page.getViewport({ scale: 2 });
  canvas.width = viewport.width;
  canvas.height = viewport.height;

  await page.render({ canvasContext: ctx, viewport }).promise;

  const a = document.createElement("a");
  a.href = canvas.toDataURL("image/png");
  a.download = "pdf_page.png";
  a.click();
}

if (localStorage.getItem("theme") === "dark") {
  document.documentElement.classList.add("dark");
}
</script>

</body>
</html>
